# 41343129

ä½œæ¥­äºŒ
# Problem : Polynomial

## è§£é¡Œèªªæ˜

1. è³‡æ–™çµæ§‹è¨­è¨ˆï¼š
    - å»ºç«‹ Term é¡åˆ¥ï¼ˆåŒ…å«ä¿‚æ•¸èˆ‡æŒ‡æ•¸ï¼‰ï¼Œä¸¦åœ¨ Polynomial é¡åˆ¥ä¸­ç”¨é™£åˆ—å„²å­˜å¤šé …å¼çš„æ‰€æœ‰é …ã€‚

2. è¼¸å…¥èˆ‡è¼¸å‡ºï¼š
    - ä½¿ç”¨é‹ç®—å­å¤šè¼‰ >>ã€<<ï¼Œæ–¹ä¾¿ä»¥æ•¸å­¸å¼æ–¹å¼è¼¸å…¥èˆ‡è¼¸å‡ºå¤šé …å¼ã€‚

3. åŠ æ³•ï¼ˆAddï¼‰ï¼š
    - é€éæ¯”è¼ƒå…©å€‹å¤šé …å¼ä¸­æ¯ä¸€é …çš„æŒ‡æ•¸ï¼Œå°‡æŒ‡æ•¸ç›¸åŒçš„é …åˆä½µï¼Œä¸åŒçš„é …å‰‡ç›´æ¥åŠ å…¥çµæœã€‚

4. ä¹˜æ³•ï¼ˆMultï¼‰ï¼š
    - å°ç¬¬ä¸€å€‹å¤šé …å¼çš„æ¯ä¸€é …èˆ‡ç¬¬äºŒå€‹å¤šé …å¼çš„æ¯ä¸€é …ç›¸ä¹˜ï¼Œ
    - è‹¥æœ‰ç›¸åŒæŒ‡æ•¸å‰‡å°‡ä¿‚æ•¸ç›¸åŠ ï¼Œæœ€å¾Œå½¢æˆæ–°çš„å¤šé …å¼çµæœã€‚

5. ä»£å…¥æ±‚å€¼ï¼ˆEvalï¼‰ï¼š
    - å°‡è¼¸å…¥çš„ x å€¼ä»£å…¥æ¯ä¸€é …ï¼Œè¨ˆç®—coef * ğ‘¥^expä¸¦ç´¯åŠ å¾—å‡ºçµæœã€‚
### è§£é¡Œæƒ³æ³•

    æœ¬é¡Œçš„ç›®æ¨™æ˜¯å¯¦ä½œä¸€å€‹èƒ½é€²è¡Œå¤šé …å¼åŸºæœ¬é‹ç®—çš„ç¨‹å¼ï¼ŒåŒ…æ‹¬åŠ æ³•ã€ä¹˜æ³•åŠä»£å…¥è®Šæ•¸æ±‚å€¼ã€‚
    å› ç‚ºå¤šé …å¼ç”±å¤šé …ï¼ˆä¿‚æ•¸èˆ‡æŒ‡æ•¸ï¼‰çµ„æˆï¼Œå› æ­¤è¨­è¨ˆä¸Šæ¡ç”¨ç‰©ä»¶å°å‘æ–¹å¼ï¼Œå°‡æ¯ä¸€é …å®šç¾©ç‚º Term é¡åˆ¥ï¼Œä¸¦ç”± Polynomial é¡åˆ¥çµ±ä¸€ç®¡ç†ã€‚
    é€éé‹ç®—å­å¤šè¼‰ï¼Œå¯è®“è¼¸å…¥èˆ‡è¼¸å‡ºæ›´è‡ªç„¶ï¼Œåƒæ•¸å­¸å¼ä¸€æ¨£æ“ä½œï¼›
    åœ¨åŠ æ³•èˆ‡ä¹˜æ³•çš„éƒ¨åˆ†ï¼Œåˆ©ç”¨æŒ‡æ•¸æ¯”å°ä¾†åˆä½µæˆ–å±•é–‹é …ï¼Œé”æˆæ­£ç¢ºçš„é‹ç®—çµæœã€‚


### ç¯„ä¾‹èªªæ˜

è‹¥è¼¸å…¥ï¼š

    a(x): 3x^2 + 2x^1 + 1
    b(x): x^1 + 4
    x=10

å‰‡è¼¸å‡ºï¼š

    a + b = 3x^2 + 3x^1 + 5
    a * b = 3x^3 + 14x^2 + 9x^1 + 4
    a(10) = 321
    b(10) = 14


## ç¨‹å¼å¯¦ä½œ

ä»¥ä¸‹ç‚ºä¸»ç¨‹å¼

```cpp
#include <iostream>
#include <cmath>
using namespace std;

class Term {
public:
    float coef;
    int exp;
    Term(float c = 0, int e = 0) : coef(c), exp(e) {}
};

class Polynomial {
private:
    Term* term;
    int terms;
public:
    Polynomial(int cap = 20) { term = new Term[cap]; terms = 0; }
    ~Polynomial() { delete[] term; }

    friend istream& operator>>(istream& in, Polynomial& p) {
        cout << "é …æ•¸: "; in >> p.terms;
        for (int i = 0; i < p.terms; i++) {
            cout << "è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: ";
            in >> p.term[i].coef >> p.term[i].exp;
        }
        return in;
    }

    friend ostream& operator<<(ostream& out, const Polynomial& p) {
        for (int i = 0; i < p.terms; i++) {
            if (i && p.term[i].coef > 0) out << " + ";
            if (p.term[i].coef < 0) out << " - ";
            float c = fabs(p.term[i].coef);
            out << c << "x^" << p.term[i].exp;
        }
        return out;
    }

    Polynomial Add(const Polynomial& b) const {
        Polynomial r;
        int i = 0, j = 0, k = 0;
        while (i < terms && j < b.terms) {
            if (term[i].exp > b.term[j].exp) r.term[k++] = term[i++];
            else if (term[i].exp < b.term[j].exp) r.term[k++] = b.term[j++];
            else r.term[k++] = Term(term[i].coef + b.term[j].coef, term[i].exp), i++, j++;
        }
        while (i < terms) r.term[k++] = term[i++];
        while (j < b.terms) r.term[k++] = b.term[j++];
        r.terms = k;
        return r;
    }

    Polynomial Mult(const Polynomial& b) const {
        Polynomial r;
        for (int i = 0; i < terms; i++)
            for (int j = 0; j < b.terms; j++) {
                int e = term[i].exp + b.term[j].exp;
                float c = term[i].coef * b.term[j].coef;
                bool found = false;
                for (int k = 0; k < r.terms; k++)
                    if (r.term[k].exp == e) { r.term[k].coef += c; found = true; break; }
                if (!found) r.term[r.terms++] = Term(c, e);
            }
        return r;
    }

    float Eval(float x) const {
        float sum = 0;
        for (int i = 0; i < terms; i++) sum += term[i].coef * pow(x, term[i].exp);
        return sum;
    }
};

int main() {
    Polynomial a, b;
    cout << "è¼¸å…¥ a(x):\n"; cin >> a;
    cout << "è¼¸å…¥ b(x):\n"; cin >> b;

    Polynomial sum = a.Add(b);
    Polynomial prod = a.Mult(b);

    float x;
    cout << "è¼¸å…¥ x çš„å€¼: "; cin >> x;

    cout << "\na(x) = " << a
         << "\n\nb(x) = " << b
         << "\n\na + b = " << sum
         << "\n\na * b = " << prod
         << "\n\na(" << x << ") = " << a.Eval(x)
         << "\n\nb(" << x << ") = " << b.Eval(x) << endl;

    return 0;
}


```

## æ•ˆèƒ½åˆ†æ

### æ™‚é–“è¤‡é›œåº¦

    
| å‡½å¼                          | åŠŸèƒ½    | æ™‚é–“è¤‡é›œåº¦        | èªªæ˜                          |
| --------------------------- | ----- | ------------ | --------------------------- |
| `Add(const Polynomial& b)`  | å¤šé …å¼åŠ æ³• | **O(m + n)** | é€é …æ¯”è¼ƒå…©å¤šé …å¼ï¼ˆmã€n ç‚ºé …æ•¸ï¼‰ï¼Œä¸€æ¬¡ç·šæ€§åˆä½µã€‚   |
| `Mult(const Polynomial& b)` | å¤šé …å¼ä¹˜æ³• | **O(m Ã— n)** | æ¯ä¸€é …éƒ½èˆ‡å¦ä¸€å€‹å¤šé …å¼çš„æ¯ä¸€é …ç›¸ä¹˜ã€‚          |
| `Eval(float x)`             | å¤šé …å¼æ±‚å€¼ | **O(n)**     | é€é …è¨ˆç®— ( c_i Ã— x^{e_i} ) å¾Œç›¸åŠ ã€‚ |
| `operator>>` / `operator<<` | è¼¸å…¥è¼¸å‡º  | **O(n)**     | é€é …è®€å¯«è³‡æ–™ã€‚                     |



### ç©ºé–“è¤‡é›œåº¦

   | æ“ä½œ / å‡½å¼                   | ç©ºé–“è¤‡é›œåº¦    | èªªæ˜                                         |
|--------------------------------|--------------|--------------------------------------------|
| `Add(const Polynomial& b)` / åŠ æ³•  | O(m + n)     | è¼¸å‡ºçµæœéœ€è¦æ–°å¤šé …å¼å­˜æ”¾æ‰€æœ‰é …ã€‚           |
| `Mult(const Polynomial& b)` / ä¹˜æ³• | O(m Ã— n)     | ä¹˜æ³•çµæœå¯èƒ½æœ‰æœ€å¤š mÃ—n é …ï¼ˆæœªåˆä½µå‰ï¼‰ã€‚   |
| `Eval(float x)` / è©•ä¼°           | O(1)         | åªéœ€ä¸€å€‹æš«å­˜è®Šæ•¸å­˜çµæœã€‚                  |
| `operator>>` / `operator<<` / è¼¸å…¥è¼¸å‡º | O(n)      | é€é …å­˜å–è®€å¯«è³‡æ–™ã€‚                         |




### æ•ˆèƒ½å½±éŸ¿å› ç´ 

1. è¼¸å…¥é …æ•¸ï¼ˆtermsï¼‰å¤šå¯¡

    - é …æ•¸è¶Šå¤šï¼ŒåŠ æ³•ã€ä¹˜æ³•æ™‚é–“æœƒéš¨æ¯”ä¾‹å¢åŠ ã€‚
    - å°ä¹˜æ³•è€Œè¨€ï¼Œé …æ•¸æˆå¹³æ–¹é—œä¿‚æˆé•·ã€‚

2. é‡è¤‡æŒ‡æ•¸çš„å‡ºç¾æ¬¡æ•¸
    - è‹¥å¤šé …å¼ä¹˜æ³•ä¸­æœ‰è¨±å¤šç›¸åŒæŒ‡æ•¸é …ï¼ŒæœƒèŠ±æ™‚é–“æœå°‹åˆä½µï¼ˆç·šæ€§æœå°‹ï¼‰ã€‚
    - è‹¥æ”¹ç”¨ map æˆ– hash å„²å­˜ï¼Œå¯é™è‡³ O(m Ã— n) â†’ O(m Ã— n log n)ã€‚

3. pow() å‡½æ•¸ä½¿ç”¨
    - Eval() æ¯æ¬¡å‘¼å« pow(x, exp)ï¼Œè‹¥æ”¹ç”¨**é€æ­¥ä¹˜æ³•ï¼ˆHornerâ€™s Ruleï¼‰**å¯åŠ å¿«æ•ˆèƒ½ã€‚
    
## æ¸¬è©¦èˆ‡é©—è­‰

### è¼¸å…¥

è¼¸å…¥ a(x):
é …æ•¸: 3
è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: 2 3
è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: 2 2
è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: 4 1

è¼¸å…¥ b(x):
é …æ•¸: 2
è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: 3 1
è¼¸å…¥ä¿‚æ•¸ æŒ‡æ•¸: 4 0

è¼¸å…¥ x çš„å€¼: 2


### å‰‡è¼¸å‡º

   a(x) = 2x^3 + 2x^2 + 4x^1

b(x) = 3x^1 + 4

a + b = 2x^3 + 2x^2 + 7x^1 + 4

a * b = 6x^4 + 14x^3 + 20x^2 + 16x^1

a(2) = 32

b(2) = 10

## ç”³è«–åŠé–‹ç™¼å ±å‘Š

### å¿ƒå¾—è¨è«–

åœ¨é€™æ¬¡å¤šé …å¼é‹ç®—ç¨‹å¼çš„é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘æ›´æ·±å…¥äº†è§£äº† C++ çš„ç‰©ä»¶å°å‘è§€å¿µï¼Œå°¤å…¶æ˜¯é¡åˆ¥è¨­è¨ˆèˆ‡é‹ç®—å­å¤šè¼‰çš„æ‡‰ç”¨ã€‚
ä¸€é–‹å§‹åœ¨è¨­è¨ˆ Polynomial é¡åˆ¥æ™‚ï¼Œéœ€è¦è€ƒæ…®å¦‚ä½•æœ‰æ•ˆåœ°å„²å­˜æ¯ä¸€é …çš„ä¿‚æ•¸èˆ‡æŒ‡æ•¸ï¼Œæœ€å¾Œæ¡ç”¨äº† Term é¡åˆ¥æ­é…é™£åˆ—çš„æ–¹å¼ï¼Œè®“æ•´é«”çµæ§‹æ¸…æ™°ä¸”æ–¹ä¾¿æ“ä½œã€‚

åœ¨å¯¦ä½œåŠ æ³•èˆ‡ä¹˜æ³•æ™‚ï¼Œæˆ‘ç™¼ç¾å¤šé …å¼çš„é‹ç®—é‚è¼¯å’Œä¸€èˆ¬æ•¸å­—ä¸åŒï¼Œå¿…é ˆæ ¹æ“šæŒ‡æ•¸é€²è¡Œæ¯”å°èˆ‡åˆä½µã€‚ä¹˜æ³•çš„éƒ¨åˆ†ç‰¹åˆ¥å®¹æ˜“å‡ºéŒ¯ï¼Œå› ç‚ºè¦åŒæ™‚è™•ç†æ¯ä¸€é …çš„å±•é–‹èˆ‡åˆä½µï¼Œè®“æˆ‘é«”æœƒåˆ°æ¼”ç®—æ³•è¦åŠƒçš„é‡è¦æ€§ã€‚

æ•´é«”ä¾†èªªï¼Œé€™å€‹ç¨‹å¼ä¸åƒ…è®“æˆ‘ç†Ÿæ‚‰äº†é¡åˆ¥å°è£ã€å‹•æ…‹è¨˜æ†¶é«”é…ç½®èˆ‡é‹ç®—å­å¤šè¼‰çš„ä½¿ç”¨ï¼Œä¹ŸåŸ¹é¤Šäº†æˆ‘æ‹†è§£å•é¡Œèˆ‡åˆ†ææ•ˆèƒ½çš„èƒ½åŠ›ã€‚é›–ç„¶ç¨‹å¼ä»å¯å„ªåŒ–ï¼ˆä¾‹å¦‚ä½¿ç”¨ vector æˆ– Hornerâ€™s Ruleï¼‰ï¼Œä½†æˆ‘å·²èƒ½ç†è§£ç‰©ä»¶å°å‘åœ¨æ•¸å­¸é‹ç®—ä¸­çš„æ‡‰ç”¨åƒ¹å€¼ï¼Œé€™æ˜¯ç›¸ç•¶æœ‰æ”¶ç©«çš„ä¸€æ¬¡ç·´ç¿’ã€‚

### ç¸½çµ

é€™æ¬¡ä½œæ¥­ä¸åƒ…å¼·åŒ–äº†æˆ‘å°é‹ç®—å­å¤šè¼‰èˆ‡é¡åˆ¥è¨­è¨ˆçš„ç†è§£ï¼Œä¹Ÿè®“æˆ‘å­¸æœƒå¦‚ä½•å°‡æ•¸å­¸æ¦‚å¿µè½‰åŒ–æˆå¯åŸ·è¡Œçš„ç¨‹å¼é‚è¼¯ï¼Œé«”æœƒåˆ°ç‰©ä»¶å°å‘åœ¨å·¥ç¨‹ä¸Šçš„éˆæ´»æ€§ã€‚